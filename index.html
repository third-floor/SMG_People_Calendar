<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>SMG Calendar Explorer</title>
  <style>
    body { font-family: sans-serif; background: #111; color: #fff; text-align: center; }
    .day { display: inline-block; width: 40px; height: 40px; margin: 4px; line-height: 40px;
           border-radius: 5px; background: #333; cursor: pointer; }
    .day:hover { background: #00BCD4; }
    .events { margin-top: 20px; text-align: left; display: inline-block; max-width: 500px; }
  </style>
</head>
<body>
  <h1>Science Museum Births & Deaths Calendar</h1>
  <div id="calendar"></div>
  <div class="events" id="events"></div>

  <script>
    async function main() {
      const response = await fetch('data/calendar_entries.json');
      const data = await response.json();

      const today = new Date();
      const month = today.getMonth() + 1;

      const calendarDiv = document.getElementById('calendar');
      for (let d = 1; d <= 31; d++) {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'day';
        dayDiv.textContent = d;
        dayDiv.onclick = () => showEvents(d, month, data);
        calendarDiv.appendChild(dayDiv);
      }
    }

    function showEvents(day, month, data) {
      const filtered = data.filter(e => e.birth_day === day && e.birth_month === month || e.death_day === day && e.death_month === month);
      const eventsDiv = document.getElementById('events');
      if (!filtered.length) {
        eventsDiv.innerHTML = `<p>No events on ${month}-${day}</p>`;
      } else {
        eventsDiv.innerHTML = `<h3>${filtered.length} event(s) on ${month}-${day}</h3>` +
          filtered.map(e => `<p><b>${e.name}</b> â€” born ${e.birth || 'N/A'}, died ${e.death || 'N/A'}</p>`).join('');
      }
    }

    main();
  </script>
</body>
</html>
